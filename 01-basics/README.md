# 01. Основы Kubernetes: Pods

## Что такое Pod?

**Pod** - это минимальная единица развертывания в Kubernetes. Это группа из одного или нескольких контейнеров, которые:
- Разделяют сетевое пространство (один IP адрес)
- Разделяют хранилище (volumes)
- Выполняются на одной ноде
- Имеют общий жизненный цикл

### Аналогия
Если Docker контейнер - это квартира, то Pod - это здание, в котором может быть одна или несколько квартир (контейнеров).

## Зачем нужны Pods?

1. **Совместное размещение**: несколько тесно связанных контейнеров работают вместе
2. **Разделение ресурсов**: контейнеры в поде видят друг друга через localhost
3. **Управление жизненным циклом**: все контейнеры в поде запускаются/останавливаются вместе

## Структура Pod манифеста

```yaml
apiVersion: v1          # Версия API Kubernetes
kind: Pod               # Тип ресурса
metadata:               # Метаданные
  name: my-pod          # Имя пода (уникальное в namespace)
  labels:               # Метки для идентификации
    app: my-app
spec:                   # Спецификация пода
  containers:           # Список контейнеров
  - name: nginx         # Имя контейнера
    image: nginx:1.25   # Docker образ
    ports:
    - containerPort: 80 # Порт контейнера
```

## Типы Pods

### 1. Однокоʹнтейнерный Pod (Single-container)
Самый распространенный случай - один контейнер на под.

### 2. Многоконтейнерный Pod (Multi-container)
Несколько контейнеров работают вместе. Паттерны:
- **Sidecar**: дополнительный контейнер (логирование, мониторинг)
- **Ambassador**: прокси для основного контейнера
- **Adapter**: адаптация данных для основного контейнера

## Жизненный цикл Pod

```
Pending → Running → Succeeded/Failed
                  ↓
               Unknown
```

- **Pending**: Pod создан, но контейнеры еще не запущены
- **Running**: Pod привязан к ноде, контейнеры запущены
- **Succeeded**: Все контейнеры завершились успешно
- **Failed**: Хотя бы один контейнер завершился с ошибкой
- **Unknown**: Состояние пода неизвестно

## Важные концепции

### Labels (Метки)
Ключ-значение пары для организации и выбора ресурсов:

```yaml
metadata:
  labels:
    app: web
    tier: frontend
    environment: production
```

### Namespaces
Логическое разделение ресурсов в кластере:

```bash
# Pods в разных namespace изолированы друг от друга
kubectl get pods -n default
kubectl get pods -n kube-system
```

### Selectors (Селекторы)
Используются для выбора pods по меткам:

```yaml
selector:
  matchLabels:
    app: web
    tier: frontend
```

## Практические примеры

В этой директории вы найдете:
- `pod-simple.yaml` - простейший под с nginx
- `pod-with-labels.yaml` - под с метками
- `pod-multi-container.yaml` - под с несколькими контейнерами
- `pod-with-resources.yaml` - под с ограничениями ресурсов
- `pod-with-env.yaml` - под с переменными окружения

## Основные команды

См. `commands.md` для полного списка команд kubectl для работы с pods.

## Практическое задание

См. `exercise.md` для практического задания по закреплению материала.

## Что дальше?

После освоения Pods переходите к разделу **02-deployments** для изучения управления множеством pods.

## Полезные ссылки

- [Официальная документация по Pods](https://kubernetes.io/docs/concepts/workloads/pods/)
- [Pod Lifecycle](https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle/)

